{
    "fv_page_title": "<i class='bi bi-cpu'></i> Function Vector Analysis",
    "fv_page_desc": "This page explores the concept of <strong>function vectors</strong>‚Äîhigh-dimensional representations of what a model 'understands' about a prompt's underlying purpose. By visualizing these vectors, we can see how the model groups similar tasks and instructions.",
    "viz_dir_not_found_error": "Visualizations directory not found. Please run the function vector analysis first.",
    "dataset_overview": "Dataset Overview",
    "interactive_analysis_section_header": "<i class='bi bi-pencil-square'></i> Interactive Analysis",
    "pca_3d_section_header": "<i class='bi bi-dice-3'></i> 3D PCA Visualization of Function Vectors",
    "run_analysis_for_viz_info": "<i class='bi bi-info-circle'></i> Run an interactive analysis below to see your own prompt plotted in this space.",
    "dataset_overview_desc_long": "The following examples are the prompts used to generate the vectorized dataset. This helps build intuition for how different tasks are represented in the model's vector space, which is visualized in the plot below.",
    "try_your_own_subheader": "Or try one of these examples:",
    "pca_box_title": "<i class='bi bi-box'></i> Interactive 3D Principal Component Analysis",
    "pca_box_purpose": "<strong>Purpose:</strong> Reduces high-dimensional function vectors to 3D space while preserving maximum variance",
    "pca_box_how_to": "<strong>How to interact:</strong> Click and drag to rotate the plot. Hover over points to see which category they belong to.",
    "pca_box_features": "<strong>Key Features:</strong> 3D rotation ‚Ä¢ Zoom & pan ‚Ä¢ Hover details ‚Ä¢ Shape & color coding ‚Ä¢ Legend toggle",
    "pca_box_elements": "<strong>Visual Elements:</strong> üîµ Circles (Abstractive) ‚Ä¢ üî∑ Diamonds (QA) ‚Ä¢ üü¶ Squares (Classification) ‚Ä¢ ‚úñÔ∏è Crosses (Extractive) ‚Ä¢ üîπ Open Diamonds (NER) ‚Ä¢ ‚¨ú Open Squares (Generation)",
    "pca_box_best_for": "<strong>Best For:</strong> Understanding overall functional organization and dimensional relationships",
    "generating_enhanced_pca_info": "üéØ Generating enhanced 3D PCA with your input!",
    "error_creating_enhanced_pca": "Error creating enhanced PCA visualization: {e}",
    "pca_3d_with_input_title": "3D PCA with Your Input<br><sub>Red star shows where your text sits in function space</sub>",
    "your_input_legend": "Your Input",
    "your_input_hover_title": "Your Input Text",
    "your_input_analysis_desc": "üîç **Your Input Analysis:** The red star shows where **\\\"{input_text}\\\"** sits in the 3D function space. Notice which function types it's closest to - this reveals what linguistic capabilities your text most strongly activates!",
    "pca_3d_standard_title": "3D PCA of Function Categories<br><sub>Interactive visualization of functional relationships</sub>",
    "standard_view_desc": "üîç **Standard View:** This shows all 120 function categories in 3D space using actual computed vectors. Run an interactive analysis above to see your input as a red diamond in this visualization!",
    "error_creating_standard_pca": "Error creating standard PCA visualization: {e}",
    "pca_viz_not_found_warning": "3D PCA visualization not found. Please generate it using the analysis script.",
    "pca_key_insights": "<strong>Key Insights:</strong> Notice how English translation tasks (English-German, English-Spanish, etc.) cluster together, and how different function types occupy distinct regions of the 3D space, revealing the model's internal functional organization.",
    "error_loading_pca_viz": "Error loading 3D PCA visualization: {e}",
    "interactive_analysis_box_title": "üî¨ Interactive Function Vector & Layer Evolution Analysis",
    "interactive_analysis_box_purpose": "<strong>Purpose:</strong> Analyze how your input text activates different linguistic functions from our balanced dataset of 120 categories",
    "interactive_analysis_box_features": "<strong>Features:</strong> Real-time analysis ‚Ä¢ Function attribution across 6 types ‚Ä¢ Layer evolution ‚Ä¢ Token-level analysis ‚Ä¢ Visual outputs",
    "interactive_analysis_box_model": "<strong>Model:</strong> OLMo-2-1124-7B analyzing against balanced function vectors (20 categories per function type)",
    "interactive_analysis_box_best_for": "<strong>Best For:</strong> Understanding how specific text inputs activate and evolve functional representations across diverse linguistic tasks",
    "input_text_header": "",
    "input_text_label": "Enter your prompt",
    "input_text_placeholder": "E.g., 'Translate 'Good morning' to German' or 'What is the capital of France?'",
    "input_text_help": "Enter any text you want to analyze. The system will show which linguistic functions are activated and how they evolve through the model layers.",
    "about_dataset_expander": "About the function vector dataset",
    "balanced_dataset_title": "Dataset Composition",
    "balanced_dataset_body": "The comparison dataset contains 600 prompts, covering 120 categories across 6 main function types.",
    "analyze_button": "Analyze Text",
    "running_analysis_spinner": "Running analysis...",
    "analysis_failed_error": "Analysis failed. Please ensure the function vector data has been generated.",
    "analysis_error": "Error during analysis: {e}",
    "ensure_model_and_data_info": "Please ensure the OLMo-2-1124-7B model and function vector data are available.",
    "example_queries_header": "<i class='bi bi-lightbulb'></i> Example Queries to Try",
    "example_queries_desc": "*These examples showcase different function types from our balanced dataset:*",
    "example_query_help": "Click to analyze: {example}",
    "analysis_complete_success": "Analysis completed!",
    "analyzed_text_header": "Analyzed Text",
    "function_types_tab": "<i class='bi bi-bar-chart-line'></i> Function Type Attribution",
    "category_analysis_tab": "<i class='bi bi-pie-chart'></i> Category Analysis",
    "layer_evolution_tab": "<i class='bi bi-layers'></i> Layer Evolution Analysis",
    "ai_explanation_header": "<i class='bi bi-robot'></i> AI-Powered Explanation",
    "generating_ai_explanation_spinner": "Generating AI-powered explanation...",
    "enable_ai_explanation_checkbox": "Enable AI Explanation",
    "enable_ai_explanation_help": "Generate a natural language explanation of the analysis results using the Qwen-72B-VL model.",
    "pca_explanation_prompt": "You are an expert AI analyst. Your task is to explain the positioning of a user's prompt on a 3D PCA plot of function vectors. The plot visualizes how a language model categorizes prompts based on their underlying function, with similar functions clustering together.\\n\\n**User's Prompt:** \"{input_text}\"\\n\\n**Analysis Data (Top 3 Closest Matches):**\\n- **Function Types:** {top_types}\\n- **Specific Categories:** {top_cats}\\n\\nBased on this data, please provide a concise, analytical explanation in three distinct parts. **Crucially, you MUST use markdown headings (`####`) for each part and follow the requested structure exactly.**\\n\\n#### Overall Placement\\nStart with a high-level summary of where the prompt is located in the PCA plot. Mention which general functional neighborhood it falls into.\\n\\n#### Top Function Type Attributions\\nAnalyze the top 3 most dominant function types. For each of the top 3 types, briefly explain why the user's prompt aligns with it, referencing the prompt's content and the nature of that function type.\\n\\n#### Top Specific Category Attribution\\nDiscuss the top 3 specific categories. For each category, briefly explain the connection and why it makes sense as a close neighbor to the user's prompt.\\n\\nStructure your answer with clear headings for each of the three parts. Ground your entire explanation in the provided data.",
    "function_type_attribution_header": "This chart shows how strongly your input aligns with the six major function types defined in the model's training data. A higher score indicates a stronger match.",
    "top_category_attribution_header": "This sunburst chart breaks down the attribution into more granular categories, showing the top 20 most similar functions to your input.",
    "sunburst_chart_title": "Top 20 Category Attributions",
    "missing_category_mapping_warning": "Some categories could not be assigned to a function type. They were skipped in the chart: {categories}",
    "no_mapped_categories_info": "No categories with valid function-type mappings were available to display.",
    "unmapped_function_type": "Unmapped Function Type",
    "layer_evolution_header": "A language model isn't a single entity; it's composed of many sequential layers, much like a factory assembly line. When you provide a prompt, the information passes through each layer, getting progressively refined. Early layers handle basic syntax and word meanings, middle layers build more complex relationships, and final layers synthesize this information to produce an output. This analysis visualizes that journey, showing how the model's 'understanding' of your prompt evolves. The charts below reveal which parts of this 'assembly line' are most active for your specific text, offering clues into the model's reasoning process.",
    "evolution_explanation_prompt": "You are an expert AI analyst. Your task is to explain two charts about layer evolution for a user's prompt.\\n\\n**User's Prompt:** \"{input_text}\"\\n\\n**Analysis Data:**\\n- **Peak Activation:** Layer {peak_activation_layer} (Strength: {peak_activation_strength:.2f})\\n- **Biggest Change:** Between Layer {biggest_change_start_layer} and {biggest_change_end_layer} (Change Magnitude: {biggest_change_magnitude:.2f})\\n\\nBased on this data, provide a detailed (2-3 sentences per part) explanation in two parts. **You MUST use markdown headings (`####`) for each part.**\\n\\n#### Activation Strength Analysis\\nExplain the significance of the peak activation occurring at layer {peak_activation_layer}. What does this suggest about the model's processing stage (e.g., early feature extraction, mid-level abstraction, or late-stage decision making)?\\n\\n#### Layer-to-Layer Change Analysis\\nExplain the significance of the largest change occurring between layers {biggest_change_start_layer} and {biggest_change_end_layer}. What does this shift imply about the model's processing?\\n\\nGround your explanation in the provided data.",
    "attribution_score_xaxis": "Attribution Score (Cosine Similarity)",
    "running_layer_evolution_spinner": "Running layer evolution analysis...",
    "evolution_not_available_info": "Layer evolution analysis was not run or failed. Please enable it in the options and try again.",
    "pca_3d_title": "3D PCA of {lang} Function Categories",
    "legend_title": "Function Types",
    "category_examples_desc": "",
    "no_examples_for_type": "No examples available for this function type in the selected language.",
    "prompt_examples_for_category": "Prompt Examples for {category}",
    "no_examples_for_category_specific": "No examples available for this specific category.",
    "function_types_subheader": "Function Types",
    "select_function_type_label": "Select a function type to explore",
    "prompt_examples_for_category_header": "Prompts Used for {category}",
    "show_all_button": "Show all {count} categories",
    "show_less_button": "Show less",
    "abstractive_tasks": "Abstractive Tasks",
    "multiple_choice_qa": "Multiple Choice QA",
    "text_classification": "Text Classification",
    "extractive_tasks": "Extractive Tasks",
    "named_entity_recognition": "Named Entity Recognition",
    "text_generation": "Text Generation",
    "feedback_survey_header": "Feedback & Comprehension Survey",
    "feedback_survey_desc": "Your feedback is valuable for improving this tool. Please take a moment to answer these questions.",
    "ux_feedback_subheader": "User Experience Feedback",
    "comprehension_subheader": "Comprehension Questions",
    "likert_scale_meaning": "Rate on a scale of 1 (Not clear at all) to 5 (Very clear).",
    "q1_pca_clarity": "How clear was the 3D PCA visualization for showing where your input fits among other functions?",
    "q2_cognitive_load": "How mentally demanding did you find it to interpret the analysis results as a whole?",
    "submit_feedback_button": "Submit Feedback",
    "feedback_success_message": "Thank you for your feedback!",
    "feedback_error_message": "Sorry, there was an error submitting your feedback: {e}",
    "feedback_please_answer_all_qs": "Please answer all comprehension questions before submitting.",
    "comprehension_qs_subheader": "Comprehension Questions",
    "comprehension_qs_desc": "Please answer the following questions to the best of your ability. Your answers help us evaluate the clarity of the visualizations.",

    "desc_text_generation": "Open-ended text generation, including creative writing or continuing a story.",

    "how_vectors_are_made_header": "How Are These Vectors Created?",
    "how_vectors_are_made_desc": "The process of creating a function vector is a multi-step pipeline that transforms raw text into a meaningful numerical representation. The diagram below illustrates this transformation, showing how a simple prompt is processed by the model to produce a vector that encapsulates its core function.",
    "how_vectors_are_made_step1_title": "STEP 1: INPUT PROMPT",
    "how_vectors_are_made_step2_title": "STEP 2: TOKENIZER",
    "how_vectors_are_made_step3_title": "STEP 3: OLMo-2-7B MODEL",
    "how_vectors_are_made_step3_desc": "Hidden States from all 32 Layers",
    "how_vectors_are_made_step4_title": "STEP 4: FINAL LAYER EXTRACTION",
    "how_vectors_are_made_step4_desc": "Vector of 4096 numbers",
    "how_vectors_are_made_step5_title": "STEP 5: FUNCTION VECTOR",
    "how_vectors_are_made_step1_example": "Translate 'Good morning' to German",
    "how_vectors_are_made_step2_example": "[\"Translate\", \"'\", \"Good\", ..., \"German\"]",

    "fv_q1": "What does a 'function vector' represent in this context?",
    "fv_q1_option_a": "A single word from the input prompt.",
    "fv_q1_option_b": "The grammatical structure of the prompt.",
    "fv_q1_option_c": "A numerical fingerprint of the prompt's core purpose.",

    "fv_q2": "What is the primary purpose of using Principal Component Analysis (PCA) for the 3D visualization?",
    "fv_q2_option_a": "To make the plot look more colorful.",
    "fv_q2_option_b": "To reduce high-dimensional vector data into a 3D space for visualization.",
    "fv_q2_option_c": "To speed up the model's processing time.",

    "fv_q3": "In the 3D PCA plot, what does the distance between two points indicate?",
    "fv_q3_option_a": "The difference in length between two prompts.",
    "fv_q3_option_c": "The functional similarity between the prompts (closer points are more similar).",
    "fv_q3_option_d": "The number of layers activated by each prompt.",
    "activation_strength_plot_title": "Activation Strength Across Layers",
    "layer_changes_plot_title": "Representational Change Between Layers",
    "fv_faithfulness_explanation_pca_html": "<div style='font-size: 0.9rem; margin-bottom: 1rem;'><strong>How This Works:</strong> The faithfulness checker verifies three types of claims from the AI's explanation:<ul><li><strong>Ranking Claims:</strong> Checks if a claimed 'most similar' function type or category is actually within the top 3 matches based on cosine similarity scores.</li><li><strong>Positional Claims:</strong> Semantically verifies if the AI's description of the input's position (e.g., 'near text classification') is a plausible summary of the actual top-ranked functions.</li><li><strong>Justification Claims:</strong> Semantically analyzes whether the reasoning provided for a category's relevance is plausible and logically consistent with the input prompt.</li></ul></div>",
    "fv_faithfulness_explanation_evolution_html": "<div style='font-size: 0.9rem; margin-bottom: 1rem;'><strong>How This Works:</strong> The faithfulness checker verifies three types of claims from the AI's explanation:<ul><li><strong>Peak/Trough Claims:</strong> Checks if a claim about a peak event correctly identifies the layer where the event occurred.</li><li><strong>Numerical Claims:</strong> Checks if a specific numerical value mentioned in the explanation correctly matches the calculated value.</li><li><strong>Layer Claims:</strong> Checks if a claim correctly identifies the layer index for a specific metric.</li></ul></div>",
    "fv_claim_extraction_prompt_header": "You are an expert claim extraction system. Your task is to read an explanation of a data visualization and extract all verifiable, factual claims into a structured JSON list. A single sentence may contain multiple claims.",
    "fv_claim_extraction_prompt_instruction": "Each object in the list MUST have the following keys:\n1.  `claim_text`: The exact sentence or phrase from the explanation that makes the claim.\n2.  `claim_type`: One of the available claim types for the given context.\n3.  `details`: An object containing the specific parameters for verification.",
    "fv_claim_extraction_prompt_context_header": "**Context of this explanation:** {context}",
    "fv_claim_extraction_prompt_types_header": "**Available Claim Types:**",
    "fv_claim_extraction_prompt_pca_types_details": "-   `top_k_similarity`: A claim that one or more function types/categories are the most similar to the input.\n    -   `details`: {{ \"item_type\": \"function_type\" or \"category\", \"items\": [\"...\"], \"rank_description\": \"most/least\" }}\n-   `positional_claim`: A claim about the input's position relative to one or more clusters in the PCA plot.\n    -   `details`: {{ \"cluster_names\": [\"...\"], \"position\": \"near/far/between\" }}\n-   `category_justification_claim`: A claim that provides a specific reason for a category's relevance to the input prompt.\n    -   `details`: {{ \"category_name\": \"...\", \"justification\": \"...\" }}",
    "fv_claim_extraction_prompt_evolution_types_details": "-   `peak_activation`: A claim about which layer had the highest activation strength.\n    -   `details`: {{ \"layer_index\": 12 }}\n-   `biggest_change`: A claim about which layer transition had the biggest change.\n    -   `details`: {{ \"start_layer\": 10, \"end_layer\": 11 }}\n-   `specific_value_claim`: A claim about a specific numerical value.\n    -   `details`: {{ \"metric\": \"activation_strength\" or \"change_magnitude\", \"layer_index\": 12, \"value\": 65.91 }}\n    -   **Note:** For \"change_magnitude\", `layer_index` refers to the **starting layer** of the transition (e.g., for layer 1->2, `layer_index` is 1).",
    "fv_claim_extraction_prompt_pca_example_header": "**Example for a 'pca' context:**",
    "fv_claim_extraction_prompt_pca_example_explanation": "- **Explanation sentence:** \"Specifically, it falls into a region characterized by abstractive tasks, text classification, and text generation.\"",
    "fv_claim_extraction_prompt_pca_example_json": "- **Resulting JSON object:**\n  ```json\n  [\n    {{\n      \"claim_text\": \"Specifically, it falls into a region characterized by abstractive tasks, text classification, and text generation.\",\n      \"claim_type\": \"positional_claim\",\n      \"details\": {{\n        \"cluster_names\": [\"abstractive tasks\", \"text classification\", \"text generation\"],\n        \"position\": \"near\"\n      }}\n    }},\n    {{\n      \"claim_text\": \"The prompt is closely linked to Language QA because it involves answering a question about a literary work.\",\n      \"claim_type\": \"category_justification_claim\",\n      \"details\": {{\n        \"category_name\": \"Language QA\",\n        \"justification\": \"it involves answering a question about a literary work\"\n      }}\n    }}\n  ]\n  ```",
    "fv_claim_extraction_prompt_evolution_example_header": "**Example for an 'evolution' context:**",
    "fv_claim_extraction_prompt_evolution_example_explanation": "- **Explanation sentence:** \"The biggest change occurring between Layer 1 and 2, with a magnitude of 0.40...\"",
    "fv_claim_extraction_prompt_evolution_example_json": "- **Resulting JSON object:**\n  ```json\n  [\n    {{\n      \"claim_text\": \"The biggest change occurring between Layer 1 and 2, with a magnitude of 0.40...\",\n      \"claim_type\": \"biggest_change\",\n      \"details\": {{ \"start_layer\": 1, \"end_layer\": 2 }}\n    }},\n    {{\n      \"claim_text\": \"The biggest change occurring between Layer 1 and 2, with a magnitude of 0.40...\",\n      \"claim_type\": \"specific_value_claim\",\n      \"details\": {{ \"metric\": \"change_magnitude\", \"layer_index\": 1, \"value\": 0.40 }}\n    }}\n  ]\n  ```",
    "fv_claim_extraction_prompt_analyze_header": "**Explanation to Analyze:**",
    "fv_claim_extraction_prompt_footer": "Respond with ONLY the JSON list of claims. If no verifiable claims are found, return an empty list `[]`.",
    "fv_semantic_verification_prompt_header": "You are an AI fact-checker specializing in semantic analysis. Your task is to determine if a claimed \"functional neighborhood\" is plausibly related to the actual top-ranked functions for a given prompt.",
    "fv_semantic_verification_prompt_rule": "**Crucial Rule:** The claimed neighborhood does not need to be a direct summary of the top functions. It should be considered \"verified\" if it represents a plausible, contextually relevant, or semantically adjacent concept. Flag as \"not verified\" if the claimed neighborhood is unrelated or logically inconsistent with the top functions.",
    "fv_semantic_verification_prompt_actual_header": "**Actual Top-Ranked Functions:**",
    "fv_semantic_verification_prompt_claimed_header": "**Claimed Functional Neighborhood:**",
    "fv_semantic_verification_prompt_task_header": "**Your Task:**",
    "fv_semantic_verification_prompt_task_instruction": "Based on the rule above, is the \"Claimed Functional Neighborhood\" plausibly related to the \"Actual Top-Ranked Functions\"? Give a clear verdict and cite concrete evidence.",
    "fv_semantic_verification_prompt_json_instruction": "Respond with a JSON object with two keys:\n1.  `is_verified`: boolean (true if plausibly related, false otherwise).\n2.  `reasoning`: A detailed 2-3 sentence explanation that references at least one item from the actual list, describes why the claim aligns or conflicts, and avoids simply repeating the claim verbatim.",
    "fv_semantic_verification_prompt_footer": "Respond with ONLY the JSON object and nothing else.",
    "fv_justification_verification_prompt_header": "You are an AI fact-checker specializing in semantic reasoning. Your task is to determine if a justification for a functional category's relevance to an input prompt is plausible and logically consistent.",
    "fv_justification_verification_prompt_rule": "**Crucial Rule:** The justification does not need to be the strongest possible argument. It should be considered \"verified\" if it presents a plausible, creative, or contextually relevant connection, even if it seems like a stretch. Only flag it as \"not verified\" if the reasoning is completely illogical, factually incorrect, or directly contradicts the prompt.",
    "fv_justification_verification_prompt_input_header": "**Input Prompt:**",
    "fv_justification_verification_prompt_category_header": "**Functional Category:**",
    "fv_justification_verification_prompt_justification_header": "**Provided Justification:**",
    "fv_justification_verification_prompt_task_header": "**Your Task:**",
    "fv_justification_verification_prompt_task_instruction": "Based on the rule above, is the justification plausible? Refer directly to the prompt and category when explaining your decision.",
    "fv_justification_verification_prompt_json_instruction": "Respond with a JSON object with two keys:\n1. `is_verified`: boolean (true if the justification is plausible, false if it is illogical or incorrect).\n2. `reasoning`: A 2-3 sentence explanation that explicitly references the input prompt and category, and explains why the justification holds or fails without merely echoing the original wording.",
    "fv_justification_verification_prompt_footer": "Respond with ONLY the JSON object and nothing else."
} 
